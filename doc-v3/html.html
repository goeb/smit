<!DOCTYPE html>
<html>
    <head>
        <title>Customize HTML</title>
        <link rel="stylesheet" type="text/css" href="../style.css">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    </head>

    <body>
        <div class="header">
            <img src="../logo.png" alt="Logo" width="150">
            <span class="header_text">The Small Issue Tracker - Documentation Smit v3.x</span>
        </div>
        <div class="page">
<aside class='menu'>
<ul>
<li><a href='index.html'>Introduction</a></li>
<li><a href='install.html'>Installation</a></li>
<li><a href='admin.html'>Administration</a></li>
<li><a href='experts.html'>Advanced Admin</a></li>
<li><a href='web_user_guide.html'>Web User Guide</a></li>
<li><a href='cloning.html'>Cloning</a></li>
<li class='active'>Customize HTML
<ul class=menu_level2>
<li><a href='#introduction'>Introduction</a></li>
<li><a href='#overview-of-the-web-pages'>Overview of the Web Pages</a></li>
<li><a href='#file-access'>File Access</a></li>
<li><a href='#css-customization'>CSS Customization</a></li>
<li><a href='#html-templates-customization'>HTML Templates Customization</a></li>
<li><a href='#sm-variables'>SM variables</a></li>
<li><a href='#project-with-dedicated-html-pages'>Project with dedicated HTML pages</a></li>
</ul>
</li>
<li><a href='api.html'>Smit API</a></li>
<li><a href='developers.html'>Developers' Guide</a></li>
</ul>
</aside>
<div class='contents'>
<h1 id="customize-html">Customize HTML</h1>
<h2 id="introduction">Introduction</h2>
<p>This page deals with the look and feel of the web interface, and how the HTML pages may be customized.</p>
<p>To customize the HTML look and feel, the administrator needs:</p>
<ul>
<li>some knowledge about HTML and CSS</li>
<li>write access to the files of the Smit repository</li>
</ul>
<p><em>Note:</em></p>
<p>This page documents Smit version &gt;= 3.3.</p>
<h2 id="overview-of-the-web-pages">Overview of the Web Pages</h2>
<p>The files by Smit are of 3 types:</p>
<ul>
<li>dynamic page (eg: list of issues)</li>
<li>static file (eg: image of a logo, style.css)</li>
<li>static embedded file (eg: smit.js)</li>
</ul>
<h3 id="dynamic-page">Dynamic Page</h3>
<p>Smit serves dynamic contents through templates:</p>
<table>
<thead>
<tr class="header">
<th align="left">Page</th>
<th align="left">Template</th>
<th align="left">Example URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Signin</td>
<td align="left"><code>signin.html</code></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">List of projects</td>
<td align="left"><code>projects.html</code></td>
<td align="left">/</td>
</tr>
<tr class="odd">
<td align="left">Create an issue</td>
<td align="left"><code>newIssue.html</code></td>
<td align="left">/proj/issues/new</td>
</tr>
<tr class="even">
<td align="left">View an issue</td>
<td align="left"><code>issue.html</code></td>
<td align="left">/proj/issues/1234</td>
</tr>
<tr class="odd">
<td align="left">List of issue</td>
<td align="left"><code>issues.html</code></td>
<td align="left">/proj/issues/</td>
</tr>
<tr class="even">
<td align="left">Configuration of a project</td>
<td align="left"><code>project.html</code></td>
<td align="left">/proj/config</td>
</tr>
<tr class="odd">
<td align="left">Configuration of a view</td>
<td align="left"><code>view.html</code></td>
<td align="left">/proj/views/Open issues</td>
</tr>
<tr class="even">
<td align="left">List of predefined views</td>
<td align="left"><code>views.html</code></td>
<td align="left">/proj/views/</td>
</tr>
<tr class="odd">
<td align="left">List of entries</td>
<td align="left"><code>entries.html</code></td>
<td align="left">/proj/entries/</td>
</tr>
<tr class="even">
<td align="left">Statistics</td>
<td align="left"><code>stat.html</code></td>
<td align="left">/proj/stat</td>
</tr>
<tr class="odd">
<td align="left">Issues accross projects</td>
<td align="left"><code>issuesAccross.html</code></td>
<td align="left">/*/issues/</td>
</tr>
<tr class="even">
<td align="left">Profile of a user</td>
<td align="left"><code>user.html</code></td>
<td align="left">/users/John Smith</td>
</tr>
<tr class="odd">
<td align="left">List of users</td>
<td align="left"><code>users.html</code></td>
<td align="left">/users/</td>
</tr>
</tbody>
</table>
<p>Templates are located in either directories:</p>
<ul>
<li><code>$REPO/.smit/templates/</code></li>
<li><code>$REPO/$PROJECT/.smip/templates/</code></li>
</ul>
<h3 id="static-file">Static File</h3>
<p>Static files are served as is. They may be anywhere in the repository, however see file access below.</p>
<p>These are typically the logos, uploaded files,...</p>
<p><em>Example:</em></p>
<pre><code>/public/logo.png
/public/style.css</code></pre>
<p>Note that uploaded files (those attached to issues) are available through the <code>files</code> virtual directory. Example:</p>
<p><code>/proj/files/2a0dfb888becb7ca697c3470c41a86cf6c69c3bf/screenshot.png</code></p>
<h3 id="static-embedded-file">Static Embedded File</h3>
<p>Static embedded files are embedded in the <code>smit</code> executable. They are served as is, and cannot be customized by the administrator.</p>
<p>There URL start by <code>/sm/</code>.</p>
<p><em>Example:</em></p>
<pre><code>/sm/version
/sm/smit.js</code></pre>
<h2 id="file-access">File Access</h2>
<p>Read access to files in folder <code>$REPO/public</code> is granted to everybody. Do not put confidential data here.</p>
<p>Read access to files in a project folder is granted to the users of the project that have read access to the project.</p>
<p>Other files cannot be read via the web interface.</p>
<h2 id="css-customization">CSS Customization</h2>
<p><em>Files:</em></p>
<pre><code>/public/style.css
/public/print.css</code></pre>
<p>These files define styles that are used in the dynamic pages. You may customize them, provided that you keep the same names of the styles.</p>
<h2 id="html-templates-customization">HTML Templates Customization</h2>
<p>By default the templates of the dynamic HTML pages are the same for all projects. It is possible to have templates dedicated to a project (see below).</p>
<p>When modifying a template, be sure to keep the following items, as Smit needs them:</p>
<ul>
<li>inclusion of <code>/sm/smit.js</code>: used by Smit to update dynamic contents</li>
<li>the SM variables (see description below)</li>
<li>the <code>id=&quot;sm_...&quot;</code></li>
<li>the <code>class=&quot;sm_...&quot;</code></li>
</ul>
<p><em>Example of customizing the logo:</em></p>
<p>Modify the <code>$REPO/public/logo.png</code>, or modify the HTML templates to point to another image.</p>
<h2 id="sm-variables">SM variables</h2>
<p>In order to give a maximum customization freedom, Smit lets the administrator define the global structure of the HTML pages, and inserts the dynamic contents at specific locations within the pages, indicated by SM variables.</p>
<p>Example of a template text:</p>
<pre><code>&lt;span&gt;Logged in as: SM_HTML_USER&lt;/span&gt;</code></pre>
<p>Example of the resulting generated HTML:</p>
<pre><code>&lt;span&gt;Logged in as: John Smith&lt;/span&gt;</code></pre>
<h3 id="basic-sm-variables">Basic SM variables</h3>
<table>
<thead>
<tr class="header">
<th align="left">SM variable</th>
<th align="left">Description</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SM_URL_ROOT</td>
<td align="left">Root URL</td>
<td align="left">/tracker</td>
</tr>
<tr class="even">
<td align="left">SM_HTML_PROJECT</td>
<td align="left">Name of current project (HTML display)</td>
<td align="left">My Project</td>
</tr>
<tr class="odd">
<td align="left">SM_URL_PROJECT</td>
<td align="left">URL to current project (includes SM_URL_ROOT)</td>
<td align="left">/tracker/My Project</td>
</tr>
<tr class="even">
<td align="left">SM_URL_USER</td>
<td align="left">Name of the signed-in user (URL format)</td>
<td align="left">John%20Smith</td>
</tr>
<tr class="odd">
<td align="left">SM_HTML_USER</td>
<td align="left">Name of the signed-in user (HTML display)</td>
<td align="left">John Smith</td>
</tr>
<tr class="even">
<td align="left">SM_RAW_ISSUE_ID</td>
<td align="left">Id of the current issue</td>
<td align="left">421</td>
</tr>
<tr class="odd">
<td align="left">SM_HTML_ISSUE_SUMMARY</td>
<td align="left">Summary of the current issue</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">SM_DATALIST_PROJECTS</td>
<td align="left"><code>&lt;datalist&gt;</code> of projects names</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="whole-blocks-of-dynamic-contents-in-the-scope-of-a-project">Whole blocks of dynamic contents in the scope of a project</h3>
<table>
<thead>
<tr class="header">
<th align="left">SM variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SM_SPAN_VIEWS_MENU</td>
<td align="left">Menu of the views</td>
</tr>
<tr class="even">
<td align="left">SM_DIV_PREDEFINED_VIEWS</td>
<td align="left">List of the views</td>
</tr>
<tr class="odd">
<td align="left">SM_DIV_PROJECTS</td>
<td align="left">List of the projects</td>
</tr>
<tr class="even">
<td align="left">SM_DIV_ISSUES</td>
<td align="left">List of issues</td>
</tr>
<tr class="odd">
<td align="left">SM_DIV_ISSUE</td>
<td align="left">Contents of an issue</td>
</tr>
<tr class="even">
<td align="left">SM_DIV_ISSUE_FORM</td>
<td align="left">Form for editing an issue</td>
</tr>
<tr class="odd">
<td align="left">SM_DIV_ISSUE_MSG_PREVIEW</td>
<td align="left">Message preview</td>
</tr>
<tr class="even">
<td align="left">SM_DIV_ENTRIES</td>
<td align="left">List of entries</td>
</tr>
</tbody>
</table>
<h3 id="whole-blocks-of-dynamic-contents-not-related-to-any-specific-project">Whole blocks of dynamic contents not related to any specific project</h3>
<table>
<thead>
<tr class="header">
<th align="left">SM variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SM_DIV_USERS</td>
<td align="left">List of users</td>
</tr>
<tr class="even">
<td align="left">SM_TABLE_USER_PERMISSIONS</td>
<td align="left">Table of computed permissions</td>
</tr>
</tbody>
</table>
<h3 id="technical-sm-variables">Technical SM variables</h3>
<table>
<thead>
<tr class="header">
<th align="left">SM variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SM_INCLUDE</td>
<td align="left">Include another HTML template file</td>
</tr>
<tr class="even">
<td align="left">SM_SCRIPT</td>
<td align="left">Include some contextual script</td>
</tr>
</tbody>
</table>
<h3 id="obsolete-sm-variables">Obsolete SM variables</h3>
<p>These SM variables may be removed in a future release.</p>
<table>
<thead>
<tr class="header">
<th align="left">SM variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SM_DIV_NAVIGATION_GLOBAL</td>
<td align="left">Global menu bar</td>
</tr>
<tr class="even">
<td align="left">SM_DIV_NAVIGATION_ISSUES</td>
<td align="left">Project specific menu bar</td>
</tr>
</tbody>
</table>
<h2 id="project-with-dedicated-html-pages">Project with dedicated HTML pages</h2>
<p>This may be useful to customize the HTML pages of a specific project.</p>
<p>The dynamic HTML templates are first looked after in <code>$REPO/&lt;project&gt;/.smip/templates</code> and, if not present, Smit looks in the <code>$REPO/.smit/templates</code> directory.</p>
<p>Therefore, if you want to customize - for example - the 'issues' page for a project:</p>
<ul>
<li>copy <code>$REPO/.smit/templates/issues.html</code> to <code>$REPO/&lt;project&gt;/.smip/templates/issues.html</code></li>
<li>customize <code>$REPO/&lt;project&gt;/.smip/templates/issues.html</code></li>
</ul>
</div>
        </div> <!-- div class page -->
        <div class="footer">
            Page updated on 31 May 2016
        </div>
    </body>
</html>
